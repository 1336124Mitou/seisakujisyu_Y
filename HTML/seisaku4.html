<!DOCTYPE html>
<html lang="ja">


<head>
    <meta charset="UTF-8">
    <title>防災宝典</title>
    <link href="../_common/image/ページアイコン.ico" rel="shortcut icon"> <!--リンクのアイコン-->
    <link href="../_common/css/seisaku.css" rel="stylesheet"><!--CSSのやつ-->
</head>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
        padding-bottom: 50px;
    }


    .container {
        max-width: 800px;
        margin: 20px auto;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
    }


    .card {
        margin: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.3s;
    }


    .card:hover {
        transform: scale(1.03);
    }


    .card-header {
        background-color: green;
        color: #fff;
        padding: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }


    .useful-section {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        margin-left: 5px;
    }


    .useful-button {
        cursor: pointer;
        background-color: red;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        margin-right: 5px;
        transition: background-color 0.3s;
    }


    .useful-button:hover {
        background-color: purple;
    }


    .useful-count {
        color: #555;
        margin-left: 5px;
    }


    .card-body {
        padding: 15px;
    }


    #title-input,
    #username-input,
    #message-input {
        width: calc(100% - 30px);
        margin: 15px;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
    }


    #send-button {
        background-color: green;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        display: block;
        margin: 0 auto;
        /* 中央に寄せるスタイル */
    }


    .terms {
        background-color: papayawhip;
        color: black;
        text-align: left;
        padding: 20px;
        border-radius: 0 0 8px 8px;
        margin-top: 20px;
        display: none;
        max-height: 300px;
        /* 一度に表示できる高さを設定 */
        overflow: auto;
        /* 最初は非表示 */
    }


    .terms p {
        font-size: 18px;
        margin-bottom: 10px;
    }


    .terms ol,
    .terms ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }


    .terms li {
        margin-bottom: 10px;
    }


    .terms ul ul {
        margin-top: 5px;
    }


    .toggle-button {
        cursor: pointer;
        color: #007bff;
        text-decoration: underline;
        display: block;
        margin-top: 10px;
    }


    .scroll-to-top-button {
        position: fixed;
        bottom: 35px;
        right: 35px;
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 12px 20px;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        /* 最初は非表示 */
    }
</style>


<body>
    <header>
        <div class="header-container">
            <img src="../_common/image/logo.png" alt="防災宝典" width="300" height="150">
        </div>
    </header>
    <nav>
        <div class="nav-container">
            <ul class="globalnav">
                <li><a href="seisaku1.html" class="btn4">ホーム</a></li>
                <li><a href="seisaku2.html" class="btn4">避難場所一覧</a></li>
                <li><a href="seisaku3.html" class="btn4">ボランティア募集</a></li>
                <li><a href="seisaku4.html" class="btn2">掲示板</a></li>
                <li><a href="seisaku5.html" class="btn4">チェックリスト</a></li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <h2>体験談募集掲示板</h2>


        <!-- 追加: 投稿フォームへのスクロールボタン -->
        <button class="scroll-to-top-button" onclick="scrollToTop()">+</button>


        <div id="messages"></div>


        <form id="message-form">
            <input type="text" id="title-input" placeholder="タイトルを入力してください">
            <input type="text" id="username-input" placeholder="ユーザー名を入力してください">
            <textarea id="message-input" placeholder="ここに体験談を入力してください"></textarea>
            <button type="button" id="send-button" onclick="sendMessage()">送信</button>
            <div style="text-align: center; margin-top: 10px;">
                <label for="agree-checkbox">
                    <input type="checkbox" id="agree-checkbox">利用規約に同意する
                </label>
            </div>
        </form>
        <div class="toggle-button" onclick="toggleTerms()">利用規約を表示/非表示</div>
        <div class="terms" id="terms">
            <p>利用規約</p>
            <ol>
                <li>利用者の行動規範：
                    <ul>
                        <li>法律の違反する投稿や内容は禁止される。</li>
                        <li>誹謗中傷、差別的な発言、不適切なコンテンツの投稿は禁止される。</li>
                    </ul>
                </li>
                <li>投稿されたコンテンツ：
                    <ul>
                        <li>利用者は自分が投稿したコンテンツに責任を持ち、権利を侵害しないように注意すること。</li>
                    </ul>
                </li>
                <li>禁止事項：
                    <ul>
                        <li>不正アクセスやセキュリティの脅威をもたらす行為は禁止される。</li>
                        <li>コンピューターウイルスや有害なコードの配信は禁止される。</li>
                    </ul>
                </li>
                <li>プライバシー：
                    <ul>
                        <li>個人情報の投稿や収集は禁止され、他の利用者のプライバシーを尊重すること。</li>
                    </ul>
                </li>
                <li>法的責任の免除：
                    <ul>
                        <li>当サイトは、利用者が当サイトを利用することにより生じた直接または間接の損害に対して一切の責任を負いません。</li>
                    </ul>
                </li>
            </ol>
        </div>
    </div>






    <script>
        function sendMessage() {
            var titleInput = document.getElementById('title-input');
            var usernameInput = document.getElementById('username-input');
            var messageInput = document.getElementById('message-input');
            var title = titleInput.value;
            var username = usernameInput.value;
            var message = messageInput.value;


            // チェックボックスの状態を確認
            var agreeCheckbox = document.getElementById('agree-checkbox');
            if (!agreeCheckbox.checked) {
                alert('利用規約に同意しないとメッセージを送信できません。');
                return;
            }


            var xhr = new XMLHttpRequest();
            xhr.open('POST', 'save_data.php', true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            var data = 'username=' + encodeURIComponent(username) +
                '&title=' + encodeURIComponent(title) +
                '&location=' + encodeURIComponent(location) +
                '&message=' + encodeURIComponent(message);
            xhr.send(data);




            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    alert(xhr.responseText);
                }
            };


            if (title.trim() !== '' && username.trim() !== '' && message.trim() !== '') {
                var messagesContainer = document.getElementById('messages');
                var card = document.createElement('div');
                card.className = 'card';


                var cardHeader = document.createElement('div');
                cardHeader.className = 'card-header';
                cardHeader.textContent = title + ' - ' + username;


                var cardBody = document.createElement('div');
                cardBody.className = 'card-body';
                cardBody.textContent = message;


                var usefulSection = document.createElement('div');
                usefulSection.className = 'useful-section';


                var usefulButton = document.createElement('button');
                usefulButton.className = 'useful-button';
                var count = 0; // ボタンが押された回数を保持する変数
                usefulButton.textContent = '❤' + count;
                usefulButton.addEventListener('click', function () {
                    count++;
                    usefulButton.textContent = '❤' + count;
                });


                var usefulCount = document.createElement('span');
                usefulCount.className = 'useful-count';
                usefulCount.textContent = '';


                usefulSection.appendChild(usefulButton);
                usefulSection.appendChild(usefulCount);


                card.appendChild(cardHeader);
                card.appendChild(cardBody);
                card.appendChild(usefulSection);


                messagesContainer.appendChild(card);


                // メッセージを追加した後、入力欄をクリアする
                titleInput.value = '';
                usernameInput.value = '';
                messageInput.value = '';


                // メッセージが追加されたら、最下部までスクロール
                messagesContainer.scrollTop = messagesContainer.scrollHeight;


                // フッターのスクロールボタンを表示
                document.querySelector('.scroll-to-top-button').style.display = 'block';
            }
        }
        document.addEventListener('DOMContentLoaded', function () {
            var agreeCheckbox = document.getElementById('agree-checkbox');
            var terms = document.getElementById('terms');


            // チェックボックスの状態を初期化
            agreeCheckbox.disabled = true;


            // チェックボックスの状態を確認するための関数
            function checkAgreeCheckboxState() {
                // 利用規約が最下部にスクロールされたかを判定
                var isScrolledToBottom = terms.scrollHeight - terms.clientHeight <= terms.scrollTop + 1;


                // チェックボックスの状態を更新
                agreeCheckbox.disabled = !isScrolledToBottom;
            }


            // 利用規約が表示されている場合にスクロール位置を確認し、チェックボックスの状態を更新
            if (terms) {
                terms.addEventListener('scroll', function () {
                    checkAgreeCheckboxState();
                });
            }
        });




        function toggleTerms() {
            var terms = document.getElementById('terms');
            terms.style.display = (terms.style.display === 'none' || terms.style.display === '') ? 'block' : 'none';
        }


        function scrollToTop() {
            // 投稿フォームまでスクロール
            document.getElementById('message-form').scrollIntoView({ behavior: 'smooth' });
        }


        // スクロール位置に応じてフッターのスクロールボタンを制御
        window.onscroll = function () {
            var scrollButton = document.querySelector('.scroll-to-top-button');
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                scrollButton.style.display = 'block';
            } else {
                scrollButton.style.display = 'block'; // ここを 'none' から 'block' に変更
            }
        };


        function scrollToTop() {
            // メッセージフォームまでスクロール
            document.getElementById('message-form').scrollIntoView({ behavior: 'smooth' });
        }
        window.onload = function () {
            // スクロール位置がトップの場合、スクロールボタンを非表示にする
            var scrollButton = document.querySelector('.scroll-to-top-button');
            if (document.body.scrollTop === 0 && document.documentElement.scrollTop === 0) {
                scrollButton.style.display = 'block';
            }
        }
    </script>
    <footer>
        <div class="footer-container">


        </div>
    </footer>
</body>


</html>